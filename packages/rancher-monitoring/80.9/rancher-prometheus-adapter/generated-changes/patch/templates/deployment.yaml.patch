--- charts-original/templates/deployment.yaml
+++ charts/templates/deployment.yaml
@@ -50,9 +50,13 @@
       dnsConfig:
         {{- toYaml . | nindent 8 }}
       {{- end }}
+      {{- if .Values.global.imagePullSecrets }}
+      imagePullSecrets:
+        {{- include "monitoring-global.imagePullSecrets" . | indent 8 }}
+      {{- end }}
       containers:
       - name: {{ .Chart.Name }}
-        image: "{{ .Values.image.repository }}:{{ .Values.image.tag | default .Chart.AppVersion }}"
+        image: "{{ template "system_default_registry" . }}{{ .Values.image.repository }}:{{ .Values.image.tag | default .Chart.AppVersion }}"
         imagePullPolicy: {{ .Values.image.pullPolicy }}
         {{- with .Values.env }}
         env:
@@ -114,7 +118,10 @@
       {{- toYaml . | nindent 6 }}
       {{- end }}
       nodeSelector:
-        {{- toYaml .Values.nodeSelector | nindent 8 }}
+        kubernetes.io/os: linux
+        {{- with .Values.nodeSelector }}
+        {{- toYaml . | nindent 8 }}
+        {{- end }}
       affinity:
         {{- toYaml .Values.affinity | nindent 8 }}
       topologySpreadConstraints:
@@ -126,8 +133,10 @@
       securityContext:
         {{- toYaml .Values.podSecurityContext | nindent 8 }}
       {{- end }}
-      tolerations:
-        {{- toYaml .Values.tolerations | nindent 8 }}
+      tolerations: {{ include "linux-node-tolerations" . | nindent 8 }}
+        {{- if .Values.tolerations }}
+          {{- toYaml .Values.tolerations | nindent 8 }}
+        {{- end }}
       {{- if .Values.image.pullSecrets }}
       imagePullSecrets:
         {{- range .Values.image.pullSecrets }}
